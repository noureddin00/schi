import{r as k,u as C,b as S,j as s,L as D,e as N}from"./vendor-BBDGfIfP.js";import{I as m}from"./input-error-DzlB5Qkt.js";import{L as b}from"./loading-button-BLSSbYXc.js";import{B as i}from"./button-BxbUMaK9.js";import{D as L,a as w,b as y,c as E,d as H}from"./dialog-Ao4xhLhR.js";import{L as p}from"./label-DUVUvbLf.js";import{S as z,a as B,b as I,c as T,d as M}from"./select-CMFY0w3t.js";import{c as O}from"./utils-fgVZ67ei.js";import{k as V}from"./richtor-QjVY_KZS.js";import"./index-BSu11NtU.js";const W=()=>{const[x,r]=k.useState(!1),{props:l}=C(),{translate:g}=l,{dashboard:e}=g||{},n=l.auth.user,{exam:a}=l,f=["draft","published","archived"].filter(t=>t!==a.status),{data:c,post:j,setData:u,processing:h,errors:o,reset:d}=S({tab:"status",status:"",feedback:""}),v=t=>{t.preventDefault(),j(route("exams.update",a.id),{onSuccess:()=>{d(),r(!1)}})};return s.jsxs("div",{className:"flex flex-wrap items-center gap-4 md:gap-6",children:[s.jsx(i,{children:s.jsx(D,{href:route("exams.details",{slug:a.slug,id:a.id}),children:(e==null?void 0:e.view_exam)||"عرض الاختبار"})}),s.jsx(i,{className:O("capitalize",a.status==="published"?"bg-green-500 hover:bg-green-600":a.status==="archived"?"bg-red-500 hover:bg-red-600":"bg-gray-500 hover:bg-gray-600"),disabled:!0,children:a.status}),n.role==="instructor"&&a.status!=="published"&&s.jsx(i,{onClick:()=>N.put(route("exams.status",{exam:a.id}),{status:"published"}),children:(e==null?void 0:e.submit_for_review)||"إرسال للمراجعة"}),n.role==="admin"&&s.jsxs(L,{open:x,onOpenChange:r,children:[s.jsx(w,{asChild:!0,children:s.jsx(i,{className:"capitalize",children:(e==null?void 0:e.change_status)||"تغيير الحالة"})}),s.jsxs(y,{children:[s.jsx(E,{children:s.jsx(H,{children:(e==null?void 0:e.change_exam_status)||"تغيير حالة الاختبار"})}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(p,{children:(e==null?void 0:e.status_label)||"الحالة"}),s.jsxs(z,{required:!0,value:c.status,onValueChange:t=>u("status",t),children:[s.jsx(B,{children:s.jsx(I,{placeholder:(e==null?void 0:e.select_status)||"اختر الحالة"})}),s.jsx(T,{children:f.map(t=>s.jsx(M,{value:t,className:"capitalize",children:t},t))})]}),s.jsx(m,{message:o.status})]}),s.jsxs("div",{className:"pb-6",children:[s.jsxs(p,{children:[(e==null?void 0:e.feedback_label)||"الملاحظات"," ",s.jsxs("span",{className:"text-gray-500",children:["(",(e==null?void 0:e.optional)||"اختياري",")"]})]}),s.jsx(V,{ssr:!0,output:"html",placeholder:{paragraph:(e==null?void 0:e.feedback_placeholder)||"أدخل ملاحظاتك للمدرب...",imageCaption:(e==null?void 0:e.image_caption)||"أدخل عنوان الصورة..."},contentMinHeight:256,contentMaxHeight:640,initialContent:c.feedback,onContentChange:t=>u(_=>({..._,feedback:t}))}),s.jsx(m,{message:o.feedback})]}),s.jsx(b,{loading:h,className:"w-full",children:(e==null?void 0:e.update_status)||"تحديث الحالة"})]})]})]})]})};export{W as default};
