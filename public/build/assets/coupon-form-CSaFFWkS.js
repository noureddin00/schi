import{u as B,r as f,b as V,j as e,ca as q}from"./vendor-BBDGfIfP.js";import{I as c}from"./input-error-DzlB5Qkt.js";import{L as H}from"./loading-button-BLSSbYXc.js";import{B as p}from"./button-BxbUMaK9.js";import{D as O,a as U,b as M,c as P,d as R,e as $,f as z}from"./dialog-Ao4xhLhR.js";import{I as m}from"./input-Dldj9DiJ.js";import{L as l}from"./label-DUVUvbLf.js";import{S as y,a as C,b as S,c as b,d as x}from"./select-CMFY0w3t.js";import{S as A}from"./switch-DRIloLVZ.js";import{o as j}from"./inertia-SZXqLvQm.js";import"./utils-fgVZ67ei.js";import"./index-BSu11NtU.js";const ie=({title:D,handler:F,coupon:s,courses:N})=>{var g;const{translate:I}=B().props,{dashboard:a={},button:h={},input:L={}}=I||{},[n,_]=f.useState(!1),o=t=>t?t.replace(" ","T").substring(0,16):"",{data:r,setData:i,post:w,put:E,reset:v,processing:u,errors:d}=V({code:(s==null?void 0:s.code)||"",course_id:(s==null?void 0:s.course_id)||"",discount_type:(s==null?void 0:s.discount_type)||"percentage",discount:(s==null?void 0:s.discount)||0,valid_from:o(s==null?void 0:s.valid_from),valid_to:o(s==null?void 0:s.valid_to),is_active:(s==null?void 0:s.is_active)??!0}),T=t=>{t.preventDefault(),s?E(route("course-coupons.update",s.id),{preserveScroll:!0,onSuccess:()=>{_(!1)}}):w(route("course-coupons.store"),{preserveScroll:!0,onSuccess:()=>{v(),_(!1)}})},k=()=>{const t=Math.random().toString(36).substring(2,10).toUpperCase();i("code",t)};return f.useEffect(()=>{n&&s?i({course_id:s.course_id||"",code:s.code||"",discount_type:s.discount_type||"percentage",discount:s.discount||0,valid_from:o(s.valid_from),valid_to:o(s.valid_to),is_active:s.is_active??!0}):n||v()},[n,s]),e.jsxs(O,{open:n,onOpenChange:_,children:[e.jsx(U,{asChild:!0,children:F}),e.jsxs(M,{className:"max-w-2xl",children:[e.jsx(P,{children:e.jsx(R,{children:D||a.create_coupon||"إنشاء قسيمة"})}),e.jsxs("form",{onSubmit:T,children:[e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs(l,{htmlFor:"code",children:[a.coupon_code||"رمز القسيمة"," *"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{id:"code",name:"code",value:r.code,onChange:t=>i("code",t.target.value.toUpperCase()),placeholder:a.coupon_code_placeholder||"أدخل رمز القسيمة",required:!0}),e.jsx(p,{type:"button",variant:"outline",onClick:k,children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsx(c,{message:d.code})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"discount_type",children:[a.discount_type||"نوع الخصم"," *"]}),e.jsxs(y,{name:"discount_type",value:r.discount_type,onValueChange:t=>i("discount_type",t),children:[e.jsx(C,{children:e.jsx(S,{placeholder:L.select_option||"اختر خياراً"})}),e.jsxs(b,{children:[e.jsx(x,{value:"percentage",children:a.discount_type_percentage||"نسبة (%)"}),e.jsx(x,{value:"fixed",children:a.discount_type_fixed||"مبلغ ثابت ($)"})]})]}),e.jsx(c,{message:d.discount_type})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"discount",children:[a.discount_value||"قيمة الخصم"," *"]}),e.jsx(m,{id:"discount",name:"discount",type:"number",value:r.discount,onChange:t=>j(t,i),min:"0",step:"0.01",required:!0}),e.jsx(c,{message:d.discount})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{htmlFor:"course_id",children:a.select_course||"اختر دورة"}),e.jsxs(y,{name:"course_id",value:(g=r.course_id)==null?void 0:g.toString(),onValueChange:t=>i("course_id",t?parseInt(t):""),children:[e.jsx(C,{children:e.jsx(S,{placeholder:a.all_courses_global_coupon||"جميع الدورات (قسيمة عامة)"})}),e.jsx(b,{children:N.map(t=>e.jsx(x,{value:t.id.toString(),children:t.title||a.global_coupon||"قسيمة عامة"},t.id))})]}),e.jsx(c,{message:d.course_id})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"valid_from",children:a.valid_from||"صالح من"}),e.jsx(m,{id:"valid_from",name:"valid_from",type:"datetime-local",value:r.valid_from,onChange:t=>j(t,i)}),e.jsx(c,{message:d.valid_from})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"valid_to",children:a.valid_to||"صالح إلى"}),e.jsx(m,{id:"valid_to",name:"valid_to",type:"datetime-local",value:r.valid_to,onChange:t=>j(t,i)}),e.jsx(c,{message:d.valid_to})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{htmlFor:"is_active",children:a.active||"نشط"}),e.jsx(A,{id:"is_active",checked:r.is_active,onCheckedChange:t=>i("is_active",t)})]})]})}),e.jsxs($,{className:"gap-2",children:[e.jsx(z,{asChild:!0,children:e.jsx(p,{type:"button",variant:"outline",children:h.cancel||"إلغاء"})}),e.jsx(H,{loading:u,disabled:u,children:s?h.update||"تحديث":h.create||"إنشاء"})]})]})]})]})};export{ie as default};
