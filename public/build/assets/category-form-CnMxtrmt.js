import{r as u,b as R,j as e,aj as q}from"./vendor-CSmzIpnM.js";import{I as H}from"./icon-picker-ANn6dCi6.js";import{I as o}from"./input-error-DFZPMsrM.js";import{L as V}from"./loading-button-CjOdg6Ro.js";import{B as g}from"./button-CPCtH35G.js";import{D as S,a as z,b as C,c as D,d as N,e as U,f as X}from"./dialog-BWowll2R.js";import{I as p}from"./input-CXffHHHp.js";import{L as r}from"./label-aM7LSFRq.js";import{S as I}from"./scroll-area-IRPV99xu.js";import{S as G,a as J,b as K,c as M,d as w}from"./select-OeQ7gBvr.js";import{T as Q}from"./textarea-DudM8zfq.js";import{u as W}from"./use-lang-D5QbSlJz.js";import{o as _}from"./inertia-SZXqLvQm.js";import"./debounce-CWHP_ANh.js";import"./tooltip-CEl36Rz7.js";import"./utils-fgVZ67ei.js";import"./index-BSu11NtU.js";const ue=({title:T,category:s,lastPosition:F,handler:L})=>{const[k,c]=u.useState(!1),[O,d]=u.useState(!1),[x,j]=u.useState((s==null?void 0:s.thumbnail)||null),{dashboard:A,input:t,button:f}=W(),{data:l,setData:i,post:b,errors:n,processing:B,reset:E}=R({title:s?s.title:"",icon:s?s.icon:"",sort:s?s.sort:F+1,status:s?s.status:1,description:s?s.description:"",thumbnail:null}),P=a=>{a.preventDefault(),s?b(route("categories.update",s.id),{onSuccess:()=>c(!1),forceFormData:!0}):b(route("categories.store"),{onSuccess:()=>{E(),c(!1)},forceFormData:!0})};return e.jsxs(S,{open:k,onOpenChange:c,children:[e.jsx(z,{children:L}),e.jsx(C,{className:"p-0",children:e.jsxs(I,{className:"max-h-[90vh] p-6",children:[e.jsx(D,{className:"mb-6",children:e.jsx(N,{children:T})}),e.jsxs("form",{onSubmit:P,className:"space-y-4 p-0.5",children:[e.jsxs("div",{children:[e.jsx(r,{children:t.title}),e.jsx(p,{required:!0,type:"text",name:"title",value:l.title,placeholder:t.title_placeholder,onChange:a=>_(a,i)}),e.jsx(o,{message:n.title})]}),e.jsxs("div",{children:[e.jsx(r,{children:t.category_icon}),e.jsx(p,{required:!0,readOnly:!0,type:"text",name:"icon",value:l.icon,placeholder:t.icon_placeholder,onClick:()=>d(!0)}),e.jsx(o,{message:n.icon}),e.jsx(S,{open:O,onOpenChange:d,children:e.jsx(C,{className:"p-0",children:e.jsxs(I,{className:"max-h-[90vh] p-6",children:[e.jsx(D,{className:"mb-6",children:e.jsx(N,{children:A.icon_picker})}),e.jsx(H,{onSelect:a=>{i("icon",a),d(!1)}})]})})})]}),e.jsxs("div",{children:[e.jsx(r,{children:t.category_status}),e.jsxs(G,{value:l.status.toString(),onValueChange:a=>i("status",Number(a)),children:[e.jsx(J,{children:e.jsx(K,{placeholder:t.status_placeholder})}),e.jsxs(M,{children:[e.jsx(w,{value:"1",children:"Active"}),e.jsx(w,{value:"0",children:"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:t.description}),e.jsx(Q,{name:"description",value:l.description,placeholder:t.description_placeholder,onChange:a=>_(a,i)}),e.jsx(o,{message:n.description})]}),e.jsxs("div",{children:[e.jsx(r,{children:t.thumbnail}),x&&e.jsxs("div",{className:"relative mb-3 inline-block",children:[e.jsx("img",{src:x,alt:"Thumbnail preview",className:"h-32 w-32 rounded-lg border border-border object-cover shadow-sm"}),e.jsx(g,{type:"button",size:"icon",variant:"destructive",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:()=>{j(null),i("thumbnail",null)},children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsx(p,{type:"file",name:"thumbnail",accept:"image/*",onChange:a=>{var v;const m=(v=a.target.files)==null?void 0:v[0];if(m){i("thumbnail",m);const h=new FileReader;h.onloadend=()=>{j(h.result)},h.readAsDataURL(m)}}}),e.jsx(o,{message:n.thumbnail})]}),e.jsxs(U,{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(X,{asChild:!0,children:e.jsx(g,{type:"button",variant:"outline",children:f.close})}),e.jsx(V,{loading:B,children:f.save_changes})]})]})]})})]})};export{ue as default};
