import{u as B,r as f,b as V,j as e,ca as q}from"./vendor-BBDGfIfP.js";import{I as c}from"./input-error-DzlB5Qkt.js";import{L as H}from"./loading-button-BLSSbYXc.js";import{B as p}from"./button-BxbUMaK9.js";import{D as O,a as U,b as M,c as P,d as R,e as z,f as A}from"./dialog-Ao4xhLhR.js";import{I as m}from"./input-Dldj9DiJ.js";import{L as d}from"./label-DUVUvbLf.js";import{S as y,a as C,b as S,c as b,d as _}from"./select-CMFY0w3t.js";import{S as G}from"./switch-DRIloLVZ.js";import{o as j}from"./inertia-SZXqLvQm.js";import"./utils-fgVZ67ei.js";import"./index-BSu11NtU.js";const ae=({title:D,handler:F,coupon:s,courses:N})=>{var g;const{translate:I}=B(),{dashboard:i,button:h,input:L}=I,[n,x]=f.useState(!1),o=t=>t?t.replace(" ","T").substring(0,16):"",{data:r,setData:a,post:w,put:E,reset:v,processing:u,errors:l}=V({code:(s==null?void 0:s.code)||"",course_id:(s==null?void 0:s.course_id)||"",discount_type:(s==null?void 0:s.discount_type)||"percentage",discount:(s==null?void 0:s.discount)||0,valid_from:o(s==null?void 0:s.valid_from),valid_to:o(s==null?void 0:s.valid_to),is_active:(s==null?void 0:s.is_active)??!0}),T=t=>{t.preventDefault(),s?E(route("course-coupons.update",s.id),{preserveScroll:!0,onSuccess:()=>{x(!1)}}):w(route("course-coupons.store"),{preserveScroll:!0,onSuccess:()=>{v(),x(!1)}})},k=()=>{const t=Math.random().toString(36).substring(2,10).toUpperCase();a("code",t)};return f.useEffect(()=>{n&&s?a({course_id:s.course_id||"",code:s.code||"",discount_type:s.discount_type||"percentage",discount:s.discount||0,valid_from:o(s.valid_from),valid_to:o(s.valid_to),is_active:s.is_active??!0}):n||v()},[n,s]),e.jsxs(O,{open:n,onOpenChange:x,children:[e.jsx(U,{asChild:!0,children:F}),e.jsxs(M,{className:"max-w-2xl",children:[e.jsx(P,{children:e.jsx(R,{children:D})}),e.jsxs("form",{onSubmit:T,children:[e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs(d,{htmlFor:"code",children:[i.coupon_code," *"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{id:"code",name:"code",value:r.code,onChange:t=>a("code",t.target.value.toUpperCase()),placeholder:i.coupon_code_placeholder,required:!0}),e.jsx(p,{type:"button",variant:"outline",onClick:k,children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsx(c,{message:l.code})]}),e.jsxs("div",{children:[e.jsxs(d,{htmlFor:"discount_type",children:[i.discount_type," *"]}),e.jsxs(y,{name:"discount_type",value:r.discount_type,onValueChange:t=>a("discount_type",t),children:[e.jsx(C,{children:e.jsx(S,{placeholder:L.select_option})}),e.jsxs(b,{children:[e.jsx(_,{value:"percentage",children:i.discount_type_percentage}),e.jsx(_,{value:"fixed",children:i.discount_type_fixed})]})]}),e.jsx(c,{message:l.discount_type})]}),e.jsxs("div",{children:[e.jsxs(d,{htmlFor:"discount",children:[i.discount_value," *"]}),e.jsx(m,{id:"discount",name:"discount",type:"number",value:r.discount,onChange:t=>j(t,a),min:"0",step:"0.01",required:!0}),e.jsx(c,{message:l.discount})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(d,{htmlFor:"course_id",children:i.select_course}),e.jsxs(y,{name:"course_id",value:(g=r.course_id)==null?void 0:g.toString(),onValueChange:t=>a("course_id",t?parseInt(t):""),children:[e.jsx(C,{children:e.jsx(S,{placeholder:i.all_courses_global_coupon})}),e.jsx(b,{children:N.map(t=>e.jsx(_,{value:t.id.toString(),children:t.title},t.id))})]}),e.jsx(c,{message:l.course_id})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"valid_from",children:i.valid_from}),e.jsx(m,{id:"valid_from",name:"valid_from",type:"datetime-local",value:r.valid_from,onChange:t=>j(t,a)}),e.jsx(c,{message:l.valid_from})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"valid_to",children:i.valid_to}),e.jsx(m,{id:"valid_to",name:"valid_to",type:"datetime-local",value:r.valid_to,onChange:t=>j(t,a)}),e.jsx(c,{message:l.valid_to})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"is_active",children:i.active}),e.jsx(G,{id:"is_active",checked:r.is_active,onCheckedChange:t=>a("is_active",t)})]})]})}),e.jsxs(z,{className:"gap-2",children:[e.jsx(A,{asChild:!0,children:e.jsx(p,{type:"button",variant:"outline",children:h.cancel})}),e.jsx(H,{loading:u,disabled:u,children:s?h.update:h.create})]})]})]})]})};export{ae as default};
