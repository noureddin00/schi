import{u as y,r as _,b as R,j as e,i as E,w as o,q as M}from"./vendor-BBDGfIfP.js";import{D as A}from"./delete-modal-xghuXLfm.js";import{I as x}from"./input-error-DzlB5Qkt.js";import{L as D}from"./loading-button-BLSSbYXc.js";import{T as L}from"./table-footer-CoYRbR2V.js";import{A as S,a as T,b as F}from"./avatar-lYJ9pRpJ.js";import{B as I}from"./button-BxbUMaK9.js";import{L as u}from"./label-DUVUvbLf.js";import{T as B}from"./textarea-ovCXlSTO.js";import{c as n}from"./utils-fgVZ67ei.js";import{t as h}from"./index-G4n3qM_p.js";import C from"./review-edit-La_uaZfZ.js";import"./dialog-Ao4xhLhR.js";import"./dropdown-menu-BvLJ_5Oe.js";import"./use-lang-B9LAL-fo.js";import"./route-B4ZMN77y.js";import"./scroll-area-Dmjd_gyP.js";import"./index-BSu11NtU.js";const se=()=>{const{props:r}=y(),{translate:p}=r,{button:v,input:j,frontend:a,common:f}=p,[m,c]=_.useState(0),{data:i,setData:l,post:g,errors:d,processing:w,reset:b}=R({rating:0,review:"",user_id:r.auth.user.id,course_id:r.course.id}),N=s=>{s.preventDefault(),g(route("course-reviews.store"),{onError:t=>{t.user_id&&h.error(t.user_id),t.course_id&&h.error(t.course_id)},onSuccess:()=>{b()}})};return e.jsxs("div",{children:[r.course.instructor.user_id!==r.auth.user.id&&e.jsxs("div",{className:"border-t py-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"mb-6 text-xl font-semibold",children:r.userReview?a.review:a.submit_review}),r.userReview&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{review:r.userReview}),e.jsx(A,{routePath:route("course-reviews.destroy",r.userReview.id),actionComponent:e.jsx(I,{size:"icon",variant:"secondary",children:e.jsx(E,{})})})]})]}),r.userReview?e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>{var t;return e.jsx("button",{type:"button",children:e.jsx(o,{className:n("h-6 w-6",s<=(m||((t=r.userReview)==null?void 0:t.rating)||0)?"fill-amber-400 text-amber-400":"text-gray-300")})},s)})}),e.jsx("p",{className:"mt-3 text-sm",children:r.userReview.review})]}):e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{className:"text-sm font-medium",children:[f.rating," *"]}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",className:"transition-transform hover:scale-110",onMouseEnter:()=>c(s),onMouseLeave:()=>c(0),onClick:()=>l("rating",s),children:e.jsx(o,{className:n("h-8 w-8 cursor-pointer transition-colors",s<=(m||i.rating)?"fill-amber-400 text-amber-400":"text-gray-300 hover:text-amber-200")})},s))}),i.rating>0&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:[a.you_rated_this," ",i.rating," ",i.rating!==1?a.stars:a.star]}),e.jsx(x,{message:d.rating})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{className:"text-sm font-medium text-gray-700",children:[a.review," *"]}),e.jsx(B,{required:!0,value:i.review,onChange:s=>l("review",s.target.value),placeholder:j.review_placeholder,className:"min-h-[120px] w-full resize-none"}),e.jsx(x,{message:d.review})]}),e.jsx(D,{loading:w,children:v.submit_review})]})]}),e.jsxs("div",{className:"border-t py-6",children:[e.jsx("h3",{className:"mb-6 text-xl font-semibold",children:a.student_reviews}),e.jsx("div",{className:"space-y-6",children:r.reviews.data.length>0?r.reviews.data.map(s=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{className:"h-8 w-8",children:[e.jsx(T,{src:s.user.photo||"",alt:s.user.name,className:"object-cover"}),e.jsx(F,{children:s.user.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.user.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",children:e.jsx(o,{className:n("h-4 w-4",t<=s.rating?"fill-amber-400 text-amber-400":"text-gray-300")})},t))}),e.jsx("p",{className:"text-muted-foreground text-xs",children:M(new Date(s.created_at),"MMM d, yyyy h:mm a")})]})]})]}),e.jsx("p",{className:"mt-3 text-sm",children:s.review})]},s.id)):e.jsx("p",{className:"p-3 text-center",children:a.no_reviews_found})}),e.jsx(L,{className:"mt-6",routeName:"course.player",paginationInfo:r.reviews,routeParams:{slug:r.course.slug,watch_history:r.watchHistory.id,lesson_id:r.watchHistory.current_watching_id}})]})]})};export{se as default};
