import{u as N,r as R,b$ as T,j as e,c2 as w,c3 as C,c4 as S,c5 as M}from"./vendor-CSmzIpnM.js";import{T as _}from"./table-filter-BNJgK8jG.js";import{T as v}from"./table-footer-D88xDGhv.js";import{T as y}from"./table-header-BK1vJDil.js";import{C as o}from"./card-BuTjYYDH.js";import{T as F,a as A,b as g,c as b}from"./table-mkQVgGjG.js";import E from"./exam-attempt-review-FQLRZxQc.js";import P from"./exam-attempt-table-columns-D-pH01wT.js";import"./use-lang-D5QbSlJz.js";import"./debounce-CWHP_ANh.js";import"./route-B4ZMN77y.js";import"./utils-fgVZ67ei.js";import"./button-CPCtH35G.js";import"./index-BSu11NtU.js";import"./dropdown-menu-CNWlVopi.js";import"./scroll-area-IRPV99xu.js";import"./table-page-size-CV6YeCQG.js";import"./question-status-icon-3elsTjZa.js";import"./badge-DV-TiKrP.js";import"./question-type-badge-bsl7poz7.js";import"./input-CXffHHHp.js";import"./label-aM7LSFRq.js";import"./richtor-C9479olP.js";const ae=()=>{var i,c,p,x,n,h;const{attempts:a,exam:d,attempt:m,translate:t}=N().props,{dashboard:j}=t||{},[u,f]=R.useState([]),r=T({data:a.data,columns:P(),onSortingChange:f,getCoreRowModel:M(),getSortedRowModel:S(),getFilteredRowModel:C(),state:{sorting:u}});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:((i=t==null?void 0:t.dashboard)==null?void 0:i.total_attempts)||"إجمالي المحاولات"}),e.jsx("p",{className:"text-2xl font-bold",children:a.total})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:((c=t==null?void 0:t.dashboard)==null?void 0:c.completed)||"مكتمل"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.data.filter(s=>s.status==="completed").length})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:((p=t==null?void 0:t.dashboard)==null?void 0:p.in_progress)||"جاري"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.data.filter(s=>s.status==="in_progress").length})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:((x=t==null?void 0:t.dashboard)==null?void 0:x.pass_rate)||"نسبة النجاح"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[a.data.length>0?(a.data.filter(s=>s.is_passed&&s.status==="completed").length/a.data.filter(s=>s.status==="completed").length*100||0).toFixed(1):0,"%"]})]})})]}),m?e.jsx(E,{attempt:m}):e.jsxs(o,{children:[e.jsx(_,{data:a,title:j.exam_attempts||"محاولات الامتحان",globalSearch:!0,tablePageSizes:[10,15,20,25],routeName:"exams.edit",routeParams:{exam:d.id,tab:"attempts"}}),e.jsxs(F,{className:"border-border border-y",children:[e.jsx(y,{table:r}),e.jsx(A,{children:(n=r.getRowModel().rows)!=null&&n.length?r.getRowModel().rows.map(s=>e.jsx(g,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(l=>e.jsx(b,{children:w(l.column.columnDef.cell,l.getContext())},l.id))},s.id)):e.jsx(g,{children:e.jsx(b,{colSpan:r.getAllColumns().length,className:"h-24 text-center",children:((h=t==null?void 0:t.dashboard)==null?void 0:h.no_exam_attempts)||"لم تجد محاولات الاختبار"})})})]}),e.jsx(v,{className:"p-5 sm:p-7",routeName:"exams.edit",paginationInfo:a,routeParams:{exam:d.id,tab:"attempts"}})]})]})};export{ae as default};
