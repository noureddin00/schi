import{r as S,u as k,b as C,j as e,L as _,e as D}from"./vendor-BBDGfIfP.js";import{I as u}from"./input-error-DzlB5Qkt.js";import{L as N}from"./loading-button-BLSSbYXc.js";import{B as r}from"./button-BxbUMaK9.js";import{D as E,a as L,b as w,c as y,d as H}from"./dialog-Ao4xhLhR.js";import{L as m}from"./label-DUVUvbLf.js";import{S as z,a as B,b as I,c as O,d as T}from"./select-CMFY0w3t.js";import{c as F}from"./utils-fgVZ67ei.js";import{k as M}from"./richtor-QjVY_KZS.js";import"./index-BSu11NtU.js";const W=()=>{const[p,n]=S.useState(!1),{props:i}=k(),{translate:h}=i,{dashboard:t}=h,l=i.auth.user,{exam:a}=i,x=["draft","published","archived"].filter(s=>s!==a.status),{data:o,post:g,setData:c,processing:f,errors:d,reset:j}=C({tab:"status",status:"",feedback:""}),b=s=>{s.preventDefault(),g(route("exams.update",a.id),{onSuccess:()=>{j(),n(!1)}})};return e.jsxs("div",{className:"flex flex-wrap items-center gap-4 md:gap-6",children:[e.jsx(r,{children:e.jsx(_,{href:route("exams.details",{slug:a.slug,id:a.id}),children:t.view_exam})}),e.jsx(r,{className:F("capitalize",a.status==="published"?"bg-green-500 hover:bg-green-600":a.status==="archived"?"bg-red-500 hover:bg-red-600":"bg-gray-500 hover:bg-gray-600"),disabled:!0,children:a.status}),l.role==="instructor"&&a.status!=="published"&&e.jsx(r,{onClick:()=>D.put(route("exams.status",{exam:a.id}),{status:"published"}),children:t.submit_for_review}),l.role==="admin"&&e.jsxs(E,{open:p,onOpenChange:n,children:[e.jsx(L,{asChild:!0,children:e.jsx(r,{className:"capitalize",children:t.change_status})}),e.jsxs(w,{children:[e.jsx(y,{children:e.jsx(H,{children:t.change_exam_status})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Status"}),e.jsxs(z,{required:!0,value:o.status,onValueChange:s=>c("status",s),children:[e.jsx(B,{children:e.jsx(I,{placeholder:t.select_status})}),e.jsx(O,{children:x.map(s=>e.jsx(T,{value:s,className:"capitalize",children:s},s))})]}),e.jsx(u,{message:d.status})]}),e.jsxs("div",{className:"pb-6",children:[e.jsxs(m,{children:["Feedback ",e.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),e.jsx(M,{ssr:!0,output:"html",placeholder:{paragraph:"Enter feedback for instructor...",imageCaption:"Enter image caption..."},contentMinHeight:256,contentMaxHeight:640,initialContent:o.feedback,onContentChange:s=>c(v=>({...v,feedback:s}))}),e.jsx(u,{message:d.feedback})]}),e.jsx(N,{loading:f,className:"w-full",children:t.update_status})]})]})]})]})};export{W as default};
