import{r as b,u as N,b as A,j as e}from"./vendor-BBDGfIfP.js";import{D as k}from"./datetime-picker-D77t9GA8.js";import{I as d}from"./input-error-DzlB5Qkt.js";import{L as F}from"./loading-button-BLSSbYXc.js";import{B as w}from"./button-BxbUMaK9.js";import{C as q}from"./checkbox-DFVJwr6m.js";import{D as H,a as I,b as L,c as P,d as B,e as E,f as O}from"./dialog-Ao4xhLhR.js";import{I as u}from"./input-Dldj9DiJ.js";import{L as c}from"./label-DUVUvbLf.js";import{S as R}from"./scroll-area-Dmjd_gyP.js";import{o as x}from"./inertia-SZXqLvQm.js";import{k as z}from"./richtor-QjVY_KZS.js";import"./utils-fgVZ67ei.js";import"./popover-CmHxiVMc.js";import"./select-CMFY0w3t.js";import"./use-lang-B9LAL-fo.js";import"./index-BSu11NtU.js";const se=({title:f,assignment:a,handler:D})=>{const[y,n]=b.useState(!1),{props:h}=N(),{translate:v}=h,{dashboard:l,input:o,button:p}=v,r={title:(o==null?void 0:o.title)||"العنوان",totalMark:(l==null?void 0:l.total_mark)||"الدرجة الكلية",passMark:(l==null?void 0:l.pass_mark)||"درجة النجاح",retakeAttempts:(o==null?void 0:o.retake_attempts)||"محاولات إعادة الاختبار",deadline:(l==null?void 0:l.deadline)||"الموعد النهائي",summary:(l==null?void 0:l.summary)||"الملخص",enterAssignmentTitle:(l==null?void 0:l.enter_assignment_title)||"أدخل عنوان المهمة",summaryPlaceholder:(o==null?void 0:o.description_placeholder)||"أدخل الوصف",lateSubmission:(l==null?void 0:l.late_submission)||"التسليم المتأخر",lateDeadline:(l==null?void 0:l.late_deadline)||"الموعد النهائي للتسليم المتأخر",lateTotalMark:(l==null?void 0:l.late_total_mark)||"الدرجة الكلية للتسليم المتأخر",submit:(p==null?void 0:p.submit)||"إرسال",cancel:(p==null?void 0:p.cancel)||"إلغاء"},{data:s,setData:i,post:C,put:M,reset:_,errors:m,processing:S}=A({title:(a==null?void 0:a.title)||"",course_id:h.course.id,total_mark:(a==null?void 0:a.total_mark)||"",pass_mark:(a==null?void 0:a.pass_mark)||"",retake:(a==null?void 0:a.retake)||1,summary:(a==null?void 0:a.summary)||"",deadline:a!=null&&a.deadline?new Date(a.deadline):new Date,late_submission:(a==null?void 0:a.late_submission)||!1,late_total_mark:(a==null?void 0:a.late_total_mark)||0,late_deadline:a!=null&&a.late_deadline?new Date(a.late_deadline):""}),T=t=>{t.preventDefault(),a?M(route("assignment.update",a.id),{onSuccess:()=>{_(),n(!1)}}):C(route("assignment.store"),{onSuccess:()=>{_(),n(!1)}})};return e.jsxs(H,{open:y,onOpenChange:n,children:[e.jsx(I,{children:D}),e.jsx(L,{className:"p-0",children:e.jsxs(R,{className:"max-h-[90vh] p-6",children:[e.jsx(P,{className:"mb-6",children:e.jsx(B,{children:f})}),e.jsxs("form",{onSubmit:T,className:"space-y-4 p-0.5",children:[e.jsxs("div",{children:[e.jsx(c,{children:r.title}),e.jsx(u,{required:!0,type:"text",name:"title",value:s.title,placeholder:r.enterAssignmentTitle,onChange:t=>x(t,i)}),e.jsx(d,{message:m.title})]}),e.jsxs("div",{children:[e.jsx(c,{children:r.deadline}),e.jsx(k,{date:s.deadline,setDate:t=>i("deadline",t)}),e.jsx(d,{message:m.deadline})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{children:r.totalMark}),e.jsx(u,{required:!0,type:"number",name:"total_mark",value:s.total_mark,onChange:t=>x(t,i)}),e.jsx(d,{message:m.total_mark})]}),e.jsxs("div",{children:[e.jsx(c,{children:r.passMark}),e.jsx(u,{required:!0,type:"number",name:"pass_mark",value:s.pass_mark,onChange:t=>x(t,i)}),e.jsx(d,{message:m.pass_mark})]}),e.jsxs("div",{children:[e.jsx(c,{children:r.retakeAttempts}),e.jsx(u,{min:"1",required:!0,type:"number",name:"retake",value:s.retake,placeholder:"00",onChange:t=>x(t,i)}),e.jsx(d,{message:m.retake})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"summary",children:r.summary}),e.jsx(z,{ssr:!0,output:"html",placeholder:{paragraph:r.summaryPlaceholder,imageCaption:"Type caption for image (optional)"},contentMinHeight:256,contentMaxHeight:640,initialContent:s.summary,onContentChange:t=>i(j=>({...j,summary:t}))}),e.jsx(d,{message:m.summary})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{id:"late_submission",checked:s.late_submission,onCheckedChange:t=>i(j=>({...j,late_submission:t}))}),e.jsx(c,{htmlFor:"late_submission",className:"cursor-pointer",children:r.lateSubmission})]}),s.late_submission&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(c,{children:r.lateTotalMark}),e.jsx(u,{type:"number",name:"late_total_mark",value:s.late_total_mark,placeholder:r.lateTotalMark,onChange:t=>x(t,i)}),e.jsx(d,{message:m.late_total_mark})]}),e.jsxs("div",{children:[e.jsx(c,{children:r.lateDeadline}),e.jsx(k,{date:s.late_deadline?new Date(s.late_deadline):new Date,setDate:t=>i("late_deadline",t)}),e.jsx(d,{message:m.late_deadline})]})]}),e.jsxs(E,{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(O,{asChild:!0,children:e.jsx(w,{type:"button",variant:"outline",children:r.cancel})}),e.jsx(F,{loading:S,children:r.submit})]})]})]})})]})};export{se as default};
