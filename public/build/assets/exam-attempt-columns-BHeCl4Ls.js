import{u as h,j as e,A as g,bT as j,e as N,L as l}from"./vendor-BBDGfIfP.js";import{B as d}from"./badge-CuP0AKCr.js";import{B as n}from"./button-BxbUMaK9.js";import{D as f,a as b,b as _,c as y}from"./dropdown-menu-BvLJ_5Oe.js";import{g as v}from"./route-B4ZMN77y.js";import{c as D}from"./utils-fgVZ67ei.js";import"./index-BSu11NtU.js";const B=(c,m)=>{const o=h(),a=v(o.url),x=["all","in_progress","completed","abandoned","submitted"];return[{accessorKey:"attempt_number",header:({column:t})=>e.jsx("div",{className:"flex items-center pl-4",children:e.jsx("span",{children:"المحاولة"})}),cell:({row:t})=>e.jsxs("div",{className:"py-1 pl-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-medium",children:["المحاولة #",t.getValue("attempt_number")]}),m===t.original.id&&e.jsxs(d,{variant:"outline",className:"border-amber-500 text-amber-600",children:[e.jsx(g,{className:"mr-1 h-3 w-3"}),"الأفضل"]})]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[new Date(t.original.start_time).toLocaleDateString()," • ",new Date(t.original.start_time).toLocaleTimeString()]})]})},{accessorKey:"obtained_marks",header:()=>e.jsx("div",{className:"text-center",children:"النتيجة"}),cell:({row:t})=>{const s=t.original&&Number(t.original.total_marks)>0?Math.round(Number(t.original.obtained_marks)/Number(t.original.total_marks)*100*100)/100:0;return e.jsxs("div",{className:"py-1 text-center",children:[e.jsxs("p",{className:"font-semibold",children:[t.getValue("obtained_marks"),"/",t.original.total_marks]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[s,"%"]})]})}},{accessorKey:"status",header:({column:t})=>e.jsx("div",{className:"flex justify-center",children:e.jsxs(f,{children:[e.jsx(b,{className:"flex items-center justify-center",children:e.jsxs(n,{variant:"ghost",className:"text-muted-foreground",children:[e.jsx("span",{children:a.status==="all"?"الكل":a.status==="in_progress"?"قيد التقدم":a.status==="completed"?"مكتمل":a.status==="abandoned"?"متروك":a.status==="submitted"?"مقدم":"الحالة"}),e.jsx(j,{className:"h-3 w-3 text-gray-700"})]})}),e.jsx(_,{align:"center",className:"min-w-[120px]",children:x.map(s=>e.jsx(y,{onClick:()=>N.get(route("student.exam.show",{id:c,tab:"attempts",status:s})),className:D("cursor-pointer text-center",a.status===s&&"bg-gray-100"),children:s==="all"?"الكل":s==="in_progress"?"قيد التقدم":s==="completed"?"مكتمل":s==="abandoned"?"متروك":s==="submitted"?"مقدم":s},s))})]})}),cell:({row:t})=>{const s=t.getValue("status"),r=s==="completed"?"secondary":s==="in_progress"?"default":"destructive",i=s==="completed"?"مكتمل":s==="in_progress"?"قيد التقدم":s==="abandoned"?"متروك":s==="submitted"?"مقدم":s;return e.jsx("div",{className:"flex justify-center py-1",children:e.jsx(d,{variant:r,children:i})})}},{accessorKey:"correct_answers",header:()=>e.jsx("div",{className:"text-center",children:"الإجابات"}),cell:({row:t})=>e.jsx("div",{className:"py-1 text-center",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-green-600",children:t.getValue("correct_answers")})," /"," ",e.jsx("span",{className:"text-red-600",children:t.original.incorrect_answers})]})})},{accessorKey:"end_time",header:"المدة",cell:({row:t})=>{const s=t.original.start_time,r=t.getValue("end_time");if(!r)return e.jsx("div",{className:"text-muted-foreground py-1 text-center",children:"—"});const i=new Date(s),u=new Date(r),p=Math.max(0,Math.round((u.getTime()-i.getTime())/6e4));return e.jsx("div",{className:"py-1 text-center",children:e.jsxs("p",{className:"text-sm",children:[p," دقيقة"]})})}},{id:"actions",header:()=>e.jsx("div",{className:"pr-4 text-end",children:"الإجراءات"}),cell:({row:t})=>{const s=t.original;return e.jsxs("div",{className:"flex justify-end gap-2 py-1 pr-4",children:[s.status==="completed"?e.jsx(n,{asChild:!0,variant:"secondary",className:"h-8",children:e.jsx(l,{href:route("student.exam.show",{id:c,tab:"attempts",attempt:s.id}),children:"النتيجة"})}):e.jsx(n,{disabled:!0,variant:"secondary",className:"h-8",children:"قيد الانتظار"}),s.status==="in_progress"||s.status==="abandoned"&&e.jsx(n,{asChild:!0,variant:"default",className:"h-8",children:e.jsx(l,{href:route("exam-attempts.take",s.id),children:"متابعة"})})]})}}]};export{B as default};
