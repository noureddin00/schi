import{r as S,u as w,b as F,j as e}from"./vendor-CSmzIpnM.js";import{D as _}from"./datetime-picker-DtFyQxDF.js";import{I as d}from"./input-error-DFZPMsrM.js";import{L as q}from"./loading-button-CjOdg6Ro.js";import{B as H}from"./button-CPCtH35G.js";import{C as I}from"./checkbox-VurnA67S.js";import{D as L,a as T,b as B,c as E,d as A,e as M,f as O}from"./dialog-BWowll2R.js";import{I as c}from"./input-CXffHHHp.js";import{L as o}from"./label-aM7LSFRq.js";import{S as P}from"./scroll-area-IRPV99xu.js";import{o as m}from"./inertia-SZXqLvQm.js";import{k as R}from"./richtor-C9479olP.js";import"./utils-fgVZ67ei.js";import"./popover-CSOpa4EW.js";import"./select-OeQ7gBvr.js";import"./use-lang-D5QbSlJz.js";import"./index-BSu11NtU.js";const le=({title:k,assignment:a,handler:b})=>{const[f,u]=S.useState(!1),{props:x}=w(),{translate:D}=x,{dashboard:l,input:h,button:n}=D,{data:t,setData:s,post:v,put:y,reset:j,errors:i,processing:C}=F({title:(a==null?void 0:a.title)||"",course_id:x.course.id,total_mark:(a==null?void 0:a.total_mark)||"",pass_mark:(a==null?void 0:a.pass_mark)||"",retake:(a==null?void 0:a.retake)||1,summary:(a==null?void 0:a.summary)||"",deadline:a!=null&&a.deadline?new Date(a.deadline):new Date,late_submission:(a==null?void 0:a.late_submission)||!1,late_total_mark:(a==null?void 0:a.late_total_mark)||0,late_deadline:a!=null&&a.late_deadline?new Date(a.late_deadline):""}),N=r=>{r.preventDefault(),a?y(route("assignment.update",a.id),{onSuccess:()=>{j(),u(!1)}}):v(route("assignment.store"),{onSuccess:()=>{j(),u(!1)}})};return e.jsxs(L,{open:f,onOpenChange:u,children:[e.jsx(T,{children:b}),e.jsx(B,{className:"p-0",children:e.jsxs(P,{className:"max-h-[90vh] p-6",children:[e.jsx(E,{className:"mb-6",children:e.jsx(A,{children:k})}),e.jsxs("form",{onSubmit:N,className:"space-y-4 p-0.5",children:[e.jsxs("div",{children:[e.jsx(o,{children:h.title}),e.jsx(c,{required:!0,type:"text",name:"title",value:t.title,placeholder:l.enter_assignment_title,onChange:r=>m(r,s)}),e.jsx(d,{message:i.title})]}),e.jsxs("div",{children:[e.jsx(o,{children:l.deadline}),e.jsx(_,{date:t.deadline,setDate:r=>s("deadline",r)}),e.jsx(d,{message:i.deadline})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:l.total_mark}),e.jsx(c,{required:!0,type:"number",name:"total_mark",value:t.total_mark,onChange:r=>m(r,s)}),e.jsx(d,{message:i.total_mark})]}),e.jsxs("div",{children:[e.jsx(o,{children:l.pass_mark}),e.jsx(c,{required:!0,type:"number",name:"pass_mark",value:t.pass_mark,onChange:r=>m(r,s)}),e.jsx(d,{message:i.pass_mark})]}),e.jsxs("div",{children:[e.jsx(o,{children:h.retake_attempts}),e.jsx(c,{min:"1",required:!0,type:"number",name:"retake",value:t.retake,placeholder:"00",onChange:r=>m(r,s)}),e.jsx(d,{message:i.retake})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"summary",children:l.summary}),e.jsx(R,{ssr:!0,output:"html",placeholder:{paragraph:l.type_assignment_summary,imageCaption:"Type caption for image (optional)"},contentMinHeight:256,contentMaxHeight:640,initialContent:t.summary,onContentChange:r=>s(p=>({...p,summary:r}))}),e.jsx(d,{message:i.summary})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:"late_submission",checked:t.late_submission,onCheckedChange:r=>s(p=>({...p,late_submission:r}))}),e.jsx(o,{htmlFor:"late_submission",className:"cursor-pointer",children:l.allow_late_submission})]}),t.late_submission&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(o,{children:l.late_submission_mark}),e.jsx(c,{type:"number",name:"late_total_mark",value:t.late_total_mark,placeholder:l.enter_marks_late,onChange:r=>m(r,s)}),e.jsx(d,{message:i.late_total_mark})]}),e.jsxs("div",{children:[e.jsx(o,{children:l.late_submission_deadline}),e.jsx(_,{date:t.late_deadline?new Date(t.late_deadline):new Date,setDate:r=>s("late_deadline",r)}),e.jsx(d,{message:i.late_deadline})]})]}),e.jsxs(M,{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(O,{asChild:!0,children:e.jsx(H,{type:"button",variant:"outline",children:n.close})}),e.jsx(q,{loading:C,children:n.submit})]})]})]})})]})};export{le as default};
