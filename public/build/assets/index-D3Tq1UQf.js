import{j as e,L as b,H as v}from"./vendor-BBDGfIfP.js";import{C as N,a as w,b as y}from"./card-XBn4TxoT.js";import{c as _}from"./utils-fgVZ67ei.js";import{B as C}from"./button-gradient-primary-l4dslw_o.js";import{A as k,a as E,b as T}from"./avatar-lYJ9pRpJ.js";import{B as j}from"./badge-CuP0AKCr.js";import{P as g}from"./progress-BHMTyF8J.js";import{T as B}from"./tabs-BBlGrPJc.js";import{S as L}from"./separator-CHdmUWH0.js";import{T as P,a as F,b as H}from"./tabs-Dr9vs2WG.js";import I from"./layout-CLHmvTDq.js";import M from"./exam-attempts-BMP7PZJR.js";import R from"./exam-certificate-BYsISwjy.js";import S from"./exam-resources-BqhkJF6T.js";import G from"./exam-result-BWywNjZf.js";import"./button-BxbUMaK9.js";import"./index-BSu11NtU.js";import"./scroll-area-Dmjd_gyP.js";import"./sheet-wkcDRUUF.js";import"./use-screen-5sSdizVg.js";import"./landing-layout-Ci-cLyn7.js";import"./index-C6XTzuDY.js";import"./app-logo-opM5JP4B.js";import"./main-BfH_Euhm.js";import"./index-G4n3qM_p.js";import"./dropdown-menu-BvLJ_5Oe.js";import"./use-auth-CGMsRAdC.js";import"./appearance-DGLM4niS.js";import"./app-yx-i77Qx.js";import"./language-plqgqSJb.js";import"./notification-DhXMcL3J.js";import"./popover-CmHxiVMc.js";import"./profile-toggle-l86s_XOw.js";import"./index.browser-OxPLOBIU.js";import"./tab-lists-VPqGXq_s.js";import"./table-header-Blk2L6oN.js";import"./table-DtRgeYtV.js";import"./exam-attempt-columns-BHeCl4Ls.js";import"./route-B4ZMN77y.js";import"./dynamic-marksheet-Dg-iLNkm.js";import"./label-DUVUvbLf.js";import"./radio-group-CBkhOvCv.js";import"./jspdf.es.min-Fo6Xp9-a.js";import"./alert-DFLrWfqJ.js";import"./question-status-icon-L9w5qUPK.js";import"./question-type-badge-hEf0DxP0.js";import"./richtor-QjVY_KZS.js";const q=({exam:s,attempts:t,bestAttempt:r,className:x})=>{var d,l,m,n,p,i;const o=(t==null?void 0:t.length)||0;t!=null&&t.filter(f=>f.status==="completed").length;const u=s.max_attempts>0?o/s.max_attempts*100:0,a=Math.min(u,100),c=r&&Number(r.total_marks)>0?Math.round(Number(r.obtained_marks)/Number(r.total_marks)*100*100)/100:0;return e.jsxs(N,{className:_("flex flex-col justify-between overflow-hidden !border md:flex-row",x),children:[e.jsx(w,{className:"h-full w-full p-0 md:min-h-full md:max-w-[340px]",children:e.jsx("img",{src:s.thumbnail||"/assets/images/blank-image.jpg",alt:s.title,className:"h-full w-full object-cover md:min-h-[220px]",onError:f=>{const h=f.target;h.src!=="/assets/images/blank-image.jpg"&&(h.src="/assets/images/blank-image.jpg")}})}),e.jsxs(y,{className:"flex w-full flex-col justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-3 flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(k,{className:"h-8 w-8",children:[e.jsx(E,{src:((l=(d=s.instructor)==null?void 0:d.user)==null?void 0:l.photo)||"",alt:(n=(m=s.instructor)==null?void 0:m.user)==null?void 0:n.name,className:"object-cover"}),e.jsx(T,{children:"IM"})]}),e.jsx("p",{className:"text-sm font-medium",children:((i=(p=s.instructor)==null?void 0:p.user)==null?void 0:i.name)||"Instructor"})]})}),e.jsx("p",{className:"hover:text-secondary-foreground text-sm font-semibold",children:s.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"w-full space-y-2 pt-4 pb-2",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("p",{className:"text-muted-foreground flex items-center justify-between text-sm font-medium",children:[e.jsx("span",{children:"محاولات"}),e.jsxs("span",{children:[o," / ",s.max_attempts]})]}),e.jsx(g,{value:a,className:"h-1.5"})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("p",{className:"text-muted-foreground flex items-center justify-between text-sm font-medium",children:[e.jsx("span",{children:"أفضل نتيجة"}),e.jsxs("span",{children:[(r==null?void 0:r.obtained_marks)??0," / ",(r==null?void 0:r.total_marks)??0," (",c,"%)"]})]}),e.jsx(g,{value:c,className:"h-1.5"})]})]}),r&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.is_passed?e.jsx(j,{className:"bg-green-600",children:"نجاح"}):e.jsx(j,{variant:"destructive",children:"فشل"}),e.jsxs("span",{className:"text-muted-foreground text-xs",children:["علامة النجاح:"," ",s.pass_mark,"%"]})]})]}),o<s.max_attempts&&e.jsx(C,{asChild:!0,shadow:!1,containerClass:"w-full",className:"to-primary-light hover:to-primary-light h-9 w-full",children:e.jsx(b,{method:"post",href:route("exam-attempts.start",s.id),data:{exam_id:s.id},children:"ابدأ الاختبار"})})]})]})]})},z=s=>{var l,m,n;const{tab:t,exam:r,attempt:x,attempts:o,bestAttempt:u,translate:a}=s,c=[{value:"attempts",label:((l=a==null?void 0:a.button)==null?void 0:l.attempts)||"محاولات"},{value:"resources",label:((m=a==null?void 0:a.button)==null?void 0:m.resources)||"الموارد"},{value:"certificate",label:((n=a==null?void 0:a.button)==null?void 0:n.certificate)||"الشهادة"}],d=()=>{switch(t){case"attempts":return x?e.jsx(G,{}):e.jsx(M,{});case"resources":return e.jsx(S,{});case"certificate":return e.jsx(R,{});default:return e.jsx(e.Fragment,{})}};return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:r.title}),e.jsx(q,{exam:r,attempts:o||[],bestAttempt:u}),e.jsx(N,{className:"mt-6",children:e.jsxs(B,{value:t,className:"bg-card w-full overflow-hidden rounded-md",children:[e.jsx("div",{className:"overflow-x-auto overflow-y-hidden",children:e.jsx(P,{className:"bg-transparent px-0 py-6",children:c.map(({label:p,value:i})=>e.jsx(F,{value:i,className:"border-primary data-[state=active]:!bg-muted data-[state=active]:before:bg-primary relative flex cursor-pointer items-center justify-start gap-3 rounded-none bg-transparent px-8 py-4 text-start !shadow-none before:absolute before:right-0 before:bottom-0 before:left-0 before:h-1 before:rounded-t-xl data-[state=active]:before:content-['.']",asChild:!0,children:e.jsx(b,{href:route("student.exam.show",{id:r.id,tab:i}),children:e.jsx("span",{children:p})})},i))})}),e.jsx(L,{className:"mt-[1px]"}),e.jsx(H,{value:t,className:"m-0 p-5",children:d()})]})})]})};z.layout=s=>e.jsx(I,{children:s,tab:"exams"});export{z as default};
