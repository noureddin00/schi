import{u as B,b as E,r as F,j as e}from"./vendor-BBDGfIfP.js";import{C as x}from"./combobox-D7KHlSTK.js";import{I as c}from"./input-error-DzlB5Qkt.js";import{L as H}from"./loading-button-BLSSbYXc.js";import{C as T}from"./card-XBn4TxoT.js";import{I as k}from"./input-Dldj9DiJ.js";import{L as o}from"./label-DUVUvbLf.js";import{R as G,a as f}from"./radio-group-CBkhOvCv.js";import{S as w,a as z,b as P,c as $,d as q}from"./select-CMFY0w3t.js";import{T as A}from"./textarea-ovCXlSTO.js";import{c as J}from"./course-languages-DcPHNS0l.js";import{D as K}from"./layout-6UfmGUKZ.js";import{o as v}from"./inertia-SZXqLvQm.js";import{k as O}from"./richtor-QjVY_KZS.js";import"./button-BxbUMaK9.js";import"./index-BSu11NtU.js";import"./utils-fgVZ67ei.js";import"./dialog-Ao4xhLhR.js";import"./popover-CmHxiVMc.js";import"./sidebar-BIOzr87F.js";import"./separator-CHdmUWH0.js";import"./sheet-wkcDRUUF.js";import"./tooltip-CsicHBaL.js";import"./main-BfH_Euhm.js";import"./index-G4n3qM_p.js";import"./appearance-CecyQ0Zp.js";import"./dropdown-menu-BvLJ_5Oe.js";import"./app-BWvQQSP2.js";import"./language-plqgqSJb.js";import"./notification-DhXMcL3J.js";import"./scroll-area-Dmjd_gyP.js";import"./app-logo-BJTT6-Cm.js";import"./accordion-DAQp0Avn.js";import"./route-B4ZMN77y.js";import"./avatar-lYJ9pRpJ.js";import"./use-lang-B9LAL-fo.js";const Q=()=>{const{props:u}=B(),{auth:b,system:y,tab:C,labels:S,categories:h,course:t,instructors:_,translate:N}=u,{input:s,button:I,common:g}=N,{data:i,setData:a,post:V,errors:l,processing:L}=E({tab:C,title:t.title,short_description:t.short_description,description:t.description,status:t.status,level:t.level,language:t.language,instructor_id:t.instructor_id,drip_content:!!t.drip_content,course_category_id:t.course_category_id,course_category_child_id:t.course_category_child_id}),D=r=>{r.preventDefault(),V(route("courses.update",{id:t.id}))},M=F.useMemo(()=>h.flatMap(r=>{var j;const n={id:r.id,label:r.title,value:r.title,child_id:""},p=((j=r.category_children)==null?void 0:j.map(m=>({id:m.course_category_id,label:`--${m.title}`,value:m.title,child_id:m.id})))||[];return[n,...p]}),[h]),R=_==null?void 0:_.filter(r=>r.user!==null).map(r=>({label:r.user.name,value:r.id}));let d;return h.map(r=>{var n;if(t.course_category_child_id)(n=r.category_children)==null||n.map(p=>{if(p.id===i.course_category_child_id){d=p;return}});else if(r.id===i.course_category_id){d=r;return}}),e.jsx(T,{className:"container p-4 sm:p-6",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(o,{children:[s.title," *"]}),e.jsx(k,{name:"title",value:i.title,onChange:r=>v(r,a),placeholder:s.title_placeholder}),e.jsx(c,{message:l.title})]}),e.jsxs("div",{children:[e.jsx(o,{children:s.short_description}),e.jsx(A,{rows:5,name:"short_description",value:i.short_description,onChange:r=>v(r,a),placeholder:s.short_description_placeholder}),e.jsx(c,{message:l.short_description})]}),e.jsxs("div",{children:[e.jsx(o,{children:s.description}),e.jsx(O,{ssr:!0,output:"html",placeholder:{paragraph:s.description_placeholder,imageCaption:s.description_placeholder},contentMinHeight:256,contentMaxHeight:640,initialContent:i.description,onContentChange:r=>a(n=>({...n,description:r}))}),e.jsx(c,{message:l.description})]}),b.user.role==="admin"&&y.sub_type==="collaborative"&&e.jsxs("div",{children:[e.jsxs(o,{children:[s.course_instructor," *"]}),e.jsx(x,{defaultValue:i.instructor_id,data:R||[],placeholder:s.instructor_placeholder,onSelect:r=>a("instructor_id",r.value)}),e.jsx(c,{message:l.instructor_id})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs(o,{children:[s.category," *"]}),e.jsx(x,{data:M,placeholder:s.category_placeholder,defaultValue:(d==null?void 0:d.title)||"",onSelect:r=>{a("course_category_id",r.id),a("course_category_child_id",r.child_id)}}),e.jsx(c,{message:l.course_category_id})]}),e.jsxs("div",{children:[e.jsxs(o,{children:[s.course_level," *"]}),e.jsxs(w,{value:i.level,onValueChange:r=>a("level",r),children:[e.jsx(z,{children:e.jsx(P,{placeholder:s.course_level_placeholder})}),e.jsx($,{children:S.map(r=>e.jsx(q,{value:r,className:"capitalize",children:r},r))})]}),e.jsx(c,{message:l.level})]}),e.jsxs("div",{children:[e.jsxs(o,{children:[s.course_language," *"]}),e.jsx(x,{defaultValue:i.language,data:J,placeholder:s.course_language_placeholder,onSelect:r=>a("language",r.value)}),e.jsx(c,{message:l.language})]}),e.jsxs("div",{children:[e.jsxs(o,{children:[s.enable_drip_content," *"]}),e.jsxs(G,{defaultValue:i.drip_content?"on":"off",className:"flex items-center space-x-4 pt-2 pb-1",onValueChange:r=>a("drip_content",r=="on"),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"cursor-pointer",id:"off",value:"off"}),e.jsx(o,{htmlFor:"off",children:g.off})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"cursor-pointer",id:"on",value:"on"}),e.jsx(o,{htmlFor:"on",children:g.on})]})]}),e.jsx(c,{message:l.drip_content})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(H,{loading:L,children:I.save_changes})})]})})};Q.layout=u=>e.jsx(K,{children:u});export{Q as default};
