import{u as E,r as F,j as e,F as u,n as f,m as h,cM as N,q as g,v as I,e as v}from"./vendor-BBDGfIfP.js";import{A as S,b as k}from"./alert-DFLrWfqJ.js";import{B}from"./badge-CuP0AKCr.js";import{B as m}from"./button-BxbUMaK9.js";import{D as R,b as T,c as V,d as H,g as L,e as y}from"./dialog-Ao4xhLhR.js";import{L as q}from"./label-DUVUvbLf.js";import{T as z}from"./textarea-ovCXlSTO.js";import{e as O}from"./richtor-QjVY_KZS.js";import"./index-BSu11NtU.js";import"./utils-fgVZ67ei.js";const b=({payment:i,isOpen:_,onClose:d})=>{const{props:w}=E(),D=w.translate||{},{dashboard:s={},table:a={},button:n={},common:r={},input:c={}}=D,x=i.meta??{},l=x.status||"pending",p=x.payment_info,[j,A]=F.useState(""),t={title:(s==null?void 0:s.offline_payment_details)||"تفاصيل الدفع دون اتصال",description:(s==null?void 0:s.offline_payment_review)||"راجع ووافق على الدفع دون اتصال",paymentStatus:(s==null?void 0:s.payment_status)||"حالة الدفع:",paymentInfo:(s==null?void 0:s.payment_information)||"معلومات الدفع",transactionId:(a==null?void 0:a.transaction_id)||"معرف المعاملة",amount:(a==null?void 0:a.amount)||"المبلغ",paymentDate:(a==null?void 0:a.payment_date)||"تاريخ الدفع",submittedAt:(a==null?void 0:a.submitted_at)||"تاريخ الإرسال",submittedDetails:(s==null?void 0:s.submitted_payment_details)||"تفاصيل الدفع المرسلة",attachment:(s==null?void 0:s.attachment)||"المرفقات",transactionProof:(s==null?void 0:s.transaction_proof)||"إثبات المعاملة",download:(n==null?void 0:n.download)||"تحميل",autoEnroll:(s==null?void 0:s.payment_auto_enroll)||"سيتم تسجيل المستخدم تلقائياً في الدورة/الاختبار بعد التحقق.",adminNotes:(c==null?void 0:c.admin_notes)||"ملاحظات المشرف (اختياري)",adminNotesPlaceholder:(c==null?void 0:c.admin_notes_placeholder)||"أضف أي ملاحظات حول هذا التحقق...",cancel:(n==null?void 0:n.cancel)||"إلغاء",reject:(n==null?void 0:n.reject)||"رفض",verifyEnroll:(s==null?void 0:s.verify_and_enroll)||"التحقق والتسجيل",close:(n==null?void 0:n.close)||"إغلاق",notAvailable:(a==null?void 0:a.not_available)||"غير متوفر",statusVerified:(r==null?void 0:r.verified)||"تم التحقق",statusRejected:(r==null?void 0:r.rejected)||"مرفوض",statusPending:(r==null?void 0:r.pending)||"قيد الانتظار"},M={verified:t.statusVerified,rejected:t.statusRejected,pending:t.statusPending},P=o=>{o.preventDefault(),v.post(route("payment-reports.offline.verify",i.id),{admin_notes:j},{onSuccess:()=>{d()}})},C=o=>{o.preventDefault(),v.post(route("payment-reports.offline.reject",i.id),{admin_notes:j},{onSuccess:()=>{d()}})};return e.jsx(R,{open:_,onOpenChange:d,children:e.jsxs(T,{className:"max-h-[90vh] max-w-3xl overflow-y-auto",children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),t.title]}),e.jsx(L,{children:t.description})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:t.paymentStatus}),e.jsxs(B,{variant:l==="verified"?"default":l==="rejected"?"destructive":"secondary",className:"gap-1",children:[l==="verified"?e.jsx(f,{className:"h-3 w-3"}):l==="rejected"?e.jsx(h,{className:"h-3 w-3"}):e.jsx(N,{className:"h-3 w-3"}),M[l]||l]})]}),e.jsxs("div",{className:"bg-muted/50 space-y-3 rounded-lg border p-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:t.paymentInfo}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground",children:[t.transactionId,":"]}),e.jsx("p",{className:"font-mono font-medium",children:i.transaction_id})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground",children:[t.amount,":"]}),e.jsxs("p",{className:"text-lg font-medium",children:["$",Number(i.amount).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground",children:[t.paymentDate,":"]}),e.jsx("p",{className:"font-medium",children:x.payment_date?g(new Date(x.payment_date),"MMM dd, yyyy"):t.notAvailable})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground",children:[t.submittedAt,":"]}),e.jsx("p",{className:"font-medium",children:i.created_at?g(new Date(i.created_at),"MMM dd, yyyy HH:mm"):t.notAvailable})]})]})]}),!!p&&e.jsxs("div",{className:"bg-muted/50 space-y-3 rounded-lg border p-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:t.submittedDetails}),e.jsx(O,{value:p})]}),i.media&&i.media.length>0&&e.jsxs("div",{className:"bg-muted/50 space-y-3 rounded-lg border p-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:t.attachment}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"text-muted-foreground h-8 w-8"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:i.media[0].file_name}),e.jsx("p",{className:"text-muted-foreground text-xs",children:t.transactionProof})]}),e.jsx(m,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:i.media[0].original_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(I,{className:"mr-1 h-4 w-4"}),t.download]})})]})]}),(l==="pending"||l==="rejected")&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx(k,{children:t.autoEnroll})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"admin_notes",children:t.adminNotes}),e.jsx(z,{id:"admin_notes",name:"admin_notes",rows:3,placeholder:t.adminNotesPlaceholder,value:j,onChange:o=>A(o.target.value)})]}),e.jsxs(y,{className:"gap-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:d,children:t.cancel}),e.jsxs(m,{type:"button",variant:"destructive",onClick:C,children:[e.jsx(h,{className:"mr-1 h-4 w-4"}),t.reject]}),e.jsxs(m,{type:"submit",children:[e.jsx(f,{className:"mr-1 h-4 w-4"}),t.verifyEnroll]})]})]})]}),l!=="pending"&&e.jsx(y,{children:e.jsx(m,{variant:"outline",onClick:d,children:t.close})})]})]})})};export{b as default};
