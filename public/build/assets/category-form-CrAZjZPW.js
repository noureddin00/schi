import{r as _,j as e,bB as I,u as A,b as H}from"./vendor-CVklK8n9.js";import{I as P}from"./icon-picker-BUDWqXvd.js";import{I as S}from"./input-error-ucpTTRPI.js";import{I as F}from"./input-Bw-r9Otv.js";import{T as V}from"./textarea-DHrC07nl.js";import{c as q,T as z,a as R,b as U}from"./tabs-CHxITg63.js";import{L as b}from"./label-BlcvhkRY.js";import{C as G,a as J,c as K,d as M}from"./card-D6iTMsWZ.js";import{B as w}from"./button-DQg8E2h7.js";import{D as L,a as Q,b as E,c as O,d as k,e as W,f as X}from"./dialog-DvjXkL6V.js";import{S as Y}from"./scroll-area-CM2sSIbV.js";import{S as Z,a as ee,b as se,c as te,d as B}from"./select-DAGKYYje.js";import"./use-lang-DMJRh8f1.js";import"./debounce-CWHP_ANh.js";import"./tooltip-oSkqLEXP.js";import"./utils-fgVZ67ei.js";import"./index-BSu11NtU.js";function ae({languages:p,fields:D,translations:n={},onChange:u,className:h="",translate:r}){var x,g;const[o,i]=_.useState(n),d=(r==null?void 0:r.dashboard)||{},j=((x=r==null?void 0:r.settings)==null?void 0:x.no_additional_languages)||"No additional languages configured. Add languages from Settings → Languages.",f=d.translations||"Translations",y=d.content_translations||"Content Translations",v=d.translate_your_content||"Translate content for each language. Leave empty to use the default content.",N=d.translating_to||"الترجمة إلى",m=(s,l,t)=>{const c={...o,[s]:{...o[s]||{},[l]:t}};i(c),u==null||u(c)};return p.length===0?e.jsx(G,{className:h,children:e.jsxs(J,{children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),f]}),e.jsx(M,{children:j})]})}):e.jsxs("div",{className:h,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),y]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v})]}),e.jsxs(q,{defaultValue:(g=p[0])==null?void 0:g.code,className:"w-full",children:[e.jsx(z,{className:"grid w-full",style:{gridTemplateColumns:`repeat(${p.length}, minmax(0, 1fr))`},children:p.map(s=>{const l=s.nativeName||s.native_name||s.name||s.code;return e.jsxs(R,{value:s.code,className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx("span",{className:"text-lg",children:s.flag}),e.jsx("span",{className:"hidden sm:inline",children:l}),e.jsx("span",{className:"sm:hidden",children:s.code.toUpperCase()})]},s.code)})}),p.map(s=>{const l=s.nativeName||s.native_name||s.name||s.code;return e.jsxs(U,{value:s.code,className:"space-y-3 mt-3",children:[e.jsx("div",{className:"rounded-md bg-muted/50 p-2 mb-3",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N,": ",e.jsx("span",{className:"font-semibold text-foreground",children:l})]})}),D.map(t=>{var C,a;const c=t.label||t.name,T=t.placeholder||(c&&l?`أدخل ${c} بـ${l}`:"");return e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(b,{htmlFor:`${s.code}-${t.name}`,className:"text-sm",children:c}),t.type==="textarea"?e.jsx(V,{id:`${s.code}-${t.name}`,value:((C=o[s.code])==null?void 0:C[t.name])||"",onChange:$=>m(s.code,t.name,$.target.value),placeholder:T,rows:3,className:"w-full resize-y text-sm",dir:s.rtl?"rtl":"ltr"}):e.jsx(F,{id:`${s.code}-${t.name}`,type:"text",value:((a=o[s.code])==null?void 0:a[t.name])||"",onChange:$=>m(s.code,t.name,$.target.value),placeholder:T,className:"w-full text-sm",dir:s.rtl?"rtl":"ltr"})]},t.name)})]},s.code)})]})]})}const ge=({title:p,handler:D,category:n})=>{const{props:u}=A(),{translate:h,langs:r}=u,{dashboard:o,input:i,button:d}=h,[j,f]=_.useState(!1),[y,v]=_.useState(!1),N=(r==null?void 0:r.filter(a=>!a.is_default))||[],{data:m,setData:x,post:g,put:s,processing:l,errors:t,reset:c}=H({name:n?n.name:"",icon:n?n.icon:"",status:n?n.status:"active",description:n?n.description:"",translations:n?n.translations:{}}),T=[{name:"name",label:i.title,type:"text",placeholder:`أدخل ${i.title} بالعربية`},{name:"description",label:i.description,type:"textarea",placeholder:`أدخل ${i.description} بالعربية`}],C=a=>{a.preventDefault(),n?s(route("blogs.categories.update",n.id),{onSuccess:()=>{f(!1),c()}}):g(route("blogs.categories.store"),{onSuccess:()=>{f(!1),c()}})};return _.useEffect(()=>{j||c()},[j]),e.jsxs(L,{open:j,onOpenChange:f,children:[e.jsx(Q,{children:D}),e.jsxs(E,{className:"sm:max-w-[425px]",children:[e.jsx(O,{children:e.jsx(k,{children:p})}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"name",children:i.title}),e.jsx(F,{id:"name",value:m.name,onChange:a=>x("name",a.target.value),className:t.name?"border-red-500":"",placeholder:o.enter_category_name}),e.jsx(S,{message:t.name})]}),e.jsxs("div",{children:[e.jsx(b,{children:i.category_icon}),e.jsx(F,{required:!0,readOnly:!0,type:"text",name:"icon",value:m.icon,placeholder:i.icon_placeholder,onClick:()=>v(!0)}),e.jsx(S,{message:t.icon}),e.jsx(L,{open:y,onOpenChange:v,children:e.jsx(E,{className:"p-0",children:e.jsxs(Y,{className:"max-h-[90vh] p-6",children:[e.jsx(O,{className:"mb-6",children:e.jsx(k,{children:o.icon_picker})}),e.jsx(P,{onSelect:a=>{x("icon",a),v(!1)}})]})})})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"status",children:i.category_status}),e.jsxs(Z,{value:m.status,onValueChange:a=>x("status",a),children:[e.jsx(ee,{children:e.jsx(se,{})}),e.jsxs(te,{children:[e.jsx(B,{value:"active",children:o.active}),e.jsx(B,{value:"inactive",children:o.inactive})]})]}),e.jsx(S,{message:t.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"description",children:o.subtitle_80_char}),e.jsx(V,{id:"description",value:m.description||"",onChange:a=>x("description",a.target.value),className:t.description?"border-red-500":""}),e.jsx(S,{message:t.description})]}),N.length>0&&e.jsx(ae,{languages:N,fields:T,translations:m.translations||{},onChange:a=>x("translations",a),translate:h})]}),e.jsxs(W,{children:[e.jsx(X,{children:e.jsx(w,{type:"button",variant:"outline",children:d.close})}),e.jsx(w,{type:"submit",disabled:l,children:n?d.update:d.create})]})]})]})]})};export{ge as default};
