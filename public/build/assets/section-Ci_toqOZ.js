import{r as b,j as e,aj as ie,bH as me,c6 as C,u as E,aq as de,e as K,b$ as U,c3 as z,c4 as V,c5 as B,c2 as H,w as ue,b as ge,c7 as pe}from"./vendor-CVklK8n9.js";import{D as he,a as xe,b as je,c as be,d as fe}from"./dialog-DvjXkL6V.js";import{u as q}from"./use-lang-DMJRh8f1.js";import{C as ve}from"./chunked-uploader-input-B-9QcO36.js";import{L as ye}from"./loading-button-ChsiQlc4.js";import{I as S}from"./input-Bw-r9Otv.js";import{L as _}from"./label-BlcvhkRY.js";import{T as G}from"./textarea-DHrC07nl.js";import{o as k}from"./inertia-SZXqLvQm.js";import{C as te,b as se}from"./card-D6iTMsWZ.js";import{I as Ne}from"./icon-picker-dialog-B8_kA4Q3.js";import{B as v}from"./button-DQg8E2h7.js";import{c as P}from"./utils-fgVZ67ei.js";import{T as Q}from"./table-header-CPqLXuDG.js";import{T as W,a as X,b as R,c as $}from"./table-DaYRixs8.js";import{T as _e}from"./table-page-size-B9NlZz-H.js";import{d as Se}from"./debounce-CWHP_ANh.js";import{g as O}from"./route-B4ZMN77y.js";import{D as we,a as Ce,b as Pe,c as Ie}from"./dropdown-menu-ipNwsWm-.js";import{S as ke}from"./scroll-area-CM2sSIbV.js";import{A as Re,a as $e,b as Ee}from"./avatar-BdjkekdG.js";const ht=(t,s)=>t.sections.find(n=>n.slug===s),w=t=>t.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()),M=(t,s)=>typeof s=="string"?t==="image"||t.includes("image")||t==="avatar"||typeof s=="string"&&s.match(/\.(jpeg|jpg|gif|png)$/i)?{type:"file",label:w(t),name:t,value:null}:t==="description"||t.includes("description")||t==="bio"||t==="content"?{type:"textarea",label:w(t),name:t,value:s||""}:t==="url"||t.includes("_url")||t.includes("link")?{type:"url",label:w(t),name:t,value:s||""}:t==="icon"?{type:"icon",label:w(t),name:t,value:s||""}:{type:"text",label:w(t),name:t,value:s||""}:typeof s=="number"?{type:"number",label:w(t),name:t,value:s||0}:typeof s=="boolean"?{type:"boolean",label:w(t),name:t,value:s||!1}:{type:"text",label:w(t),name:t,value:(s==null?void 0:s.toString())||""},F=t=>{if("contents"in t){const s=[{type:"contents",label:"Contents",name:"contents",value:t.contents||[]}];return Object.entries(t).forEach(([n,a])=>{if(n==="array"||n==="contents")return;const o=M(n,a);s.unshift(o)}),s}if("array"in t){const s=Array.isArray(t.array)&&t.array.length>0?t.array[0]:{};let n=[];Object.keys(s).length>0?Object.keys(s).forEach(o=>{(typeof s[o]=="string"||typeof s[o]=="number"||typeof s[o]=="boolean")&&n.push(M(o,s[o]))}):n=[{type:"text",label:"Title",name:"title",value:""},{type:"text",label:"Value",name:"value",value:""}];const a=[{type:"array",label:"Items",name:"array",value:(t.array||[]).map(o=>{const c={...o};return Object.keys(c).forEach(u=>{(u==="image"||u.includes("image"))&&(c.new_image=null)}),c}),fields:n}];return Object.entries(t).forEach(([o,c])=>{if(o==="array"||o==="contents")return;const u=M(o,c);a.unshift(u)}),a}return Object.entries(t).map(([s,n])=>typeof n=="object"&&n!==null&&!Array.isArray(n)?{type:"object",label:w(s),name:s,value:n,fields:F(n)}:M(s,n))},Ae=t=>{let s=!0;return Object.entries(t).forEach(([n,a])=>{switch(typeof a){case"string":a.length>0&&(s=!1);break;case"number":a>0&&(s=!1);break}}),s},Te=t=>t.filter(s=>{let n=!1;return Object.entries(s).forEach(([a,o])=>{switch(typeof o){case"string":o.trim().length>0&&(n=!0);break;case"number":o>0&&(n=!0);break;case"boolean":o&&(n=!0);break}}),n}),xt=t=>{var n;const s=(n=t==null?void 0:t.properties)==null?void 0:n.array;return s?Te(s):[]},ae=b.createContext(void 0),Me=({children:t,section:s,onSuccess:n,onError:a})=>{const[o,c]=b.useState(!1),[u,g]=b.useState(!1),m={section:s,open:o,setOpen:c,isSubmit:u,setIsSubmit:g};return e.jsx(ae.Provider,{value:m,children:t})},D=()=>{const t=b.useContext(ae);if(t===void 0)throw new Error("useSectionEditor must be used within a SectionEditorProvider");return t},De=({field:t,onChange:s})=>{const{button:n}=q(),[a,o]=b.useState({}),[c,u]=b.useState(Array.isArray(t.value)?t.value:[]);b.useEffect(()=>{Array.isArray(t.value)&&u(t.value)},[t.value,t.type]);const g=(i,d,x)=>{m(i,"new_image",x);const h=`${i}-${d}`;if(x&&x.type.startsWith("image/")){a[h]&&URL.revokeObjectURL(a[h]);const r=URL.createObjectURL(x);o(j=>({...j,[h]:r}))}else o(r=>{const j={...r};return j[h]&&(URL.revokeObjectURL(j[h]),delete j[h]),j}),x===null&&m(i,"new_image",null)},m=(i,d,x)=>{const h=[...c];h[i]||(h[i]={}),h[i][d]=x,u(h),s(h)},l=()=>{var x;const i=(x=t.fields)==null?void 0:x.reduce((h,r)=>(h[r.name]=r.value,h),{}),d=[...c,i];u(d),s(d)},p=i=>{const d=c.filter((x,h)=>h!==i);u(d),s(d)};return e.jsxs("div",{children:[e.jsx("div",{className:"space-y-4",children:c.map((i,d)=>{var h;const x=d===0&&Ae(i);return e.jsx(te,{className:P("relative",x&&"hidden"),children:e.jsxs(se,{className:"p-4 pt-6",children:[e.jsx(v,{size:"icon",type:"button",variant:"ghost",onClick:()=>p(d),className:"absolute top-2 right-2 text-red-600 hover:text-red-800",children:e.jsx(ie,{className:"h-5 w-5"})}),(h=t.fields)==null?void 0:h.map((r,j)=>{const I=r.type==="file"?i.image:null;return e.jsxs("div",{className:"mb-4",children:[e.jsx(_,{htmlFor:`${t.name}-${d}-${r.name}`,className:"mb-2 block",children:r.label}),e.jsx("div",{className:"mt-1",children:r.type==="textarea"?e.jsx(G,{id:`${t.name}-${d}-${r.name}`,value:i[r.name]||"",onChange:N=>m(d,r.name,N.target.value),rows:3}):r.type==="file"?e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{type:"file",id:`${t.name}-${d}-${r.name}`,accept:"image/*",onChange:N=>{var A;return g(d,r.name,((A=N.target.files)==null?void 0:A[0])||null)},className:"cursor-pointer"}),(a[`${d}-${r.name}`]||I)&&e.jsx("div",{className:"relative inline-block",children:e.jsx("img",{alt:"Preview",src:a[`${d}-${r.name}`]||I,className:"h-20 w-auto rounded-lg border object-cover shadow-sm"})})]}):r.type==="icon"?e.jsx(Ne,{name:r.name,value:i[r.name]||"",placeholder:"Pick your category icon",onSelect:N=>m(d,r.name,N)}):e.jsx(S,{type:r.type==="number"?"number":"text",id:`${t.name}-${d}-${r.name}`,value:i[r.name]||"",onChange:N=>m(d,r.name,N.target.value)})})]},j)})]})},d)})}),e.jsx("div",{className:"mt-4",children:e.jsxs(v,{type:"button",onClick:l,variant:"outline",size:"sm",className:"flex items-center",children:[e.jsx(me,{className:"mr-1 h-4 w-4"}),n.add_item]})})]})},Le=t=>[{accessorKey:"title",header:({column:s})=>e.jsxs(v,{type:"button",variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[t.table.category_name,e.jsx(C,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.getValue("title")})},{accessorKey:"courses_count",header:({column:s})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(v,{type:"button",variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[t.table.courses,e.jsx(C,{className:"ml-2 h-4 w-4"})]})}),cell:({row:s})=>e.jsx("div",{className:"text-center",children:e.jsx("p",{children:s.original.courses_count})})}],J=t=>{const{Icon:s,data:n,title:a,component:o,globalSearch:c,tablePageSizes:u,routeName:g,className:m,searchKey:l="search"}=t,p=E(),i=O(p.url),d=b.useRef(null),x=Se(async h=>{const r=h.target.value;K.get(route(g||"",{...i,[l]:r}),{},{preserveState:!0})},300);return b.useEffect(()=>{i[l]&&d.current&&d.current.focus()},[t]),e.jsxs("div",{className:P("items-center justify-between p-6 md:flex",m),children:[e.jsxs("div",{className:"flex items-center gap-5",children:[s&&e.jsx("div",{className:"bg-primary-25 flex h-10 w-10 items-center justify-center rounded-md",children:s}),a&&e.jsx("p",{className:"mb-4 text-lg font-semibold md:mb-0",children:a})]}),e.jsxs("div",{className:"flex items-center justify-end",children:[c&&e.jsxs("div",{className:"relative w-full md:max-w-[260px]",children:[e.jsx("input",{type:"text",ref:d,placeholder:"Search",onChange:x,className:"focus:border-primary border-border h-10 w-full rounded-md border py-[15px] pr-4 pl-12 text-sm font-normal focus:ring-0 focus:outline-0",defaultValue:i[l]??""}),e.jsx(de,{className:"absolute top-3 left-4 z-10 h-4 w-4"})]}),g&&e.jsx(_e,{routeName:g,pageData:n,dropdownList:u,pageSizeKey:`${l}_per_page`,className:"ml-3"}),o&&o]})]})},Y=t=>{const{paginationInfo:s,paginationKey:n="page"}=t,{current_page:a,last_page:o,first_page_url:c,last_page_url:u,next_page_url:g,prev_page_url:m}=s,l=E(),p=O(l.url),i=[];if(o>0)for(let r=1;r<=o;r++)i.push({key:`${r}`,value:r});else i.push({key:"1",value:1});const d=r=>{K.get(route(t.routeName,{...t.routeParams||{},...p,[n]:r}),{},{preserveState:!0})},x=r=>{const j=O(r);K.get(route(t.routeName,{...t.routeParams||{},...p,[n]:j.page}),{},{preserveState:!0})},h=r=>`text-center py-1 ${a===r&&"bg-primary-50"}`;return e.jsxs("div",{className:`space-y-4 ${t.className}`,children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"mr-1",children:e.jsxs("strong",{children:[a," of ",o]})}),e.jsx("span",{className:"mr-3",children:"| Go to page:"}),e.jsxs(we,{children:[e.jsx(Ce,{children:e.jsx(v,{type:"button",variant:"outline",className:"h-8 w-[60px] rounded-md border",children:a})}),e.jsx(Pe,{align:"end",className:"min-w-[60px]",children:e.jsx(ke,{className:"",children:i.map(r=>e.jsx(Ie,{onClick:()=>d(r.value),className:h(r.value),children:r.value},r.key))})})]})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(v,{type:"button",variant:"ghost",disabled:!m,onClick:()=>x(c),className:"bg-muted border-border h-8 border px-2 text-xs sm:px-3",children:"<<First"}),e.jsx(v,{type:"button",variant:"ghost",disabled:!m,onClick:()=>x(m),className:"bg-muted border-border mx-3 h-8 border px-2 text-xs sm:px-3",children:"Prev"}),e.jsx(v,{type:"button",variant:"ghost",disabled:!g,onClick:()=>x(g),className:"bg-muted border-border mx-3 h-8 border px-2 text-xs sm:px-3",children:"Next"}),e.jsx(v,{type:"button",variant:"ghost",disabled:!g,onClick:()=>x(u),className:"bg-muted border-border h-8 border px-2 text-xs sm:px-3",children:"Last>>"})]})]})},Ke=({categories:t,selectedIds:s=[],onCourseSelect:n})=>{var m;const a=E(),o=a.props.type==="demo"?"home.demo":"home",[c,u]=b.useState([]),g=U({data:t.data,columns:Le(a.props.translate),onSortingChange:u,getCoreRowModel:B(),getSortedRowModel:V(),getFilteredRowModel:z(),state:{sorting:c}});return e.jsxs("div",{children:[e.jsx(J,{data:t,title:"Categories",globalSearch:!0,searchKey:"category",tablePageSizes:[10,15,20,25],routeName:o}),e.jsxs(W,{className:"border-border border-y",children:[e.jsx(Q,{table:g}),e.jsx(X,{children:(m=g.getRowModel().rows)!=null&&m.length?g.getRowModel().rows.map(l=>e.jsx(R,{"data-state":l.getIsSelected()&&"selected",className:P("hover:bg-muted cursor-pointer",(s==null?void 0:s.includes(Number(l.original.id)))&&"bg-secondary-light"),onClick:()=>n&&n(Number(l.original.id)),children:l.getVisibleCells().map(p=>e.jsx($,{children:H(p.column.columnDef.cell,p.getContext())},p.id))},l.id)):e.jsx(R,{children:e.jsx($,{className:"h-24 text-center",children:a.props.translate.common.no_results_found})})})]}),e.jsx(Y,{className:"p-4",routeName:o,paginationInfo:t,paginationKey:"category"})]})},Oe=t=>[{accessorKey:"title",header:"Title",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.getValue("title")})},{accessorKey:"enrollments_count",header:({column:s})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(v,{type:"button",variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[t.table.enrollments,e.jsx(C,{})]})}),cell:({row:s})=>e.jsx("div",{className:"text-center",children:e.jsx("p",{children:s.original.enrollments_count})})},{accessorKey:"average_rating",header:({column:s})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(v,{type:"button",variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[t.table.rating,e.jsx(C,{})]})}),cell:({row:s})=>e.jsxs("div",{className:"flex items-center justify-center gap-1 text-center",children:[e.jsx("p",{children:Number(s.original.average_rating).toFixed(1)}),e.jsx("span",{className:"text-yellow-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",s.original.reviews_count,")"]})]})}],Fe=({courses:t,selectedIds:s=[],onCourseSelect:n})=>{var m;const a=E(),o=a.props.type==="demo"?"home.demo":"home",[c,u]=b.useState([]),g=U({data:t.data,columns:Oe(a.props.translate),onSortingChange:u,getCoreRowModel:B(),getSortedRowModel:V(),getFilteredRowModel:z(),state:{sorting:c}});return e.jsxs("div",{children:[e.jsx(J,{data:t,title:"Courses",globalSearch:!0,searchKey:"course",tablePageSizes:[10,15,20,25],routeName:o}),e.jsxs(W,{className:"border-border border-y",children:[e.jsx(Q,{table:g}),e.jsx(X,{children:(m=g.getRowModel().rows)!=null&&m.length?g.getRowModel().rows.map(l=>e.jsx(R,{"data-state":l.getIsSelected()&&"selected",className:P("hover:bg-muted cursor-pointer",(s==null?void 0:s.includes(Number(l.original.id)))&&"bg-secondary-light"),onClick:()=>n&&n(Number(l.original.id)),children:l.getVisibleCells().map(p=>e.jsx($,{children:H(p.column.columnDef.cell,p.getContext())},p.id))},l.id)):e.jsx(R,{children:e.jsx($,{className:"h-24 text-center",children:a.props.translate.common.no_results_found})})})]}),e.jsx(Y,{className:"p-4",routeName:o,paginationInfo:t})]})},Ue=t=>[{accessorKey:"user.name",header:({column:s})=>e.jsxs(v,{type:"button",variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[t.table.instructor,e.jsx(C,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Re,{className:"h-8 w-8",children:[e.jsx($e,{src:s.original.user.photo||"",alt:s.original.user.name,className:"object-cover"}),e.jsx(Ee,{children:s.original.user.name.charAt(0)})]}),e.jsx("span",{className:"capitalize",children:s.original.user.name})]})},{accessorKey:"total_enrollments",header:({column:s})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(v,{type:"button",variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[t.table.enrollments,e.jsx(C,{className:"ml-2 h-4 w-4"})]})}),cell:({row:s})=>e.jsx("div",{className:"text-center",children:e.jsx("p",{children:s.original.total_enrollments_count})})},{accessorKey:"average_rating",header:({column:s})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(v,{type:"button",variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[t.table.rating,e.jsx(C,{className:"ml-2 h-4 w-4"})]})}),cell:({row:s})=>e.jsxs("div",{className:"flex items-center justify-center gap-1 text-center",children:[e.jsx("p",{children:Number(s.original.total_average_rating).toFixed(1)}),e.jsx(ue,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",s.original.total_reviews_count,")"]})]})}],ze=({instructors:t,selectedIds:s=[],onCourseSelect:n})=>{var m;const a=E(),o=a.props.type==="demo"?"home.demo":"home",[c,u]=b.useState([]),g=U({data:t.data,columns:Ue(a.props.translate),onSortingChange:u,getCoreRowModel:B(),getSortedRowModel:V(),getFilteredRowModel:z(),state:{sorting:c}});return e.jsxs("div",{children:[e.jsx(J,{data:t,title:"Instructors",globalSearch:!0,searchKey:"instructor",tablePageSizes:[10,15,20,25],routeName:o}),e.jsxs(W,{className:"border-border border-y",children:[e.jsx(Q,{table:g}),e.jsx(X,{children:(m=g.getRowModel().rows)!=null&&m.length?g.getRowModel().rows.map(l=>e.jsx(R,{"data-state":l.getIsSelected()&&"selected",className:P("hover:bg-muted cursor-pointer",(s==null?void 0:s.includes(Number(l.original.id)))&&"bg-secondary-light"),onClick:()=>n&&n(Number(l.original.id)),children:l.getVisibleCells().map(p=>e.jsx($,{children:H(p.column.columnDef.cell,p.getContext())},p.id))},l.id)):e.jsx(R,{children:e.jsx($,{className:"h-24 text-center",children:a.props.translate.common.no_results_found})})})]}),e.jsx(Y,{className:"p-4",routeName:o,paginationInfo:t,paginationKey:"instructor"})]})},Ve=({field:t,section_slug:s,selectedIds:n=[],onChange:a})=>{var x,h;const{props:o}=E(),{courses:c,categories:u,instructors:g}=o,{section:m}=D(),[l,p]=b.useState((x=m.properties)!=null&&x.contents?(h=m.properties)==null?void 0:h.contents:[]);b.useEffect(()=>{t.type==="contents"&&Array.isArray(t.value)&&p(t.value)},[t.value,t.type]);const i=r=>{let j;l.includes(r)?j=l.filter(I=>I!==r):j=[...l,r],p(j),a==null||a(j)},d=()=>{switch(s){case"hero":case"top_course":case"top_courses":case"new_courses":return e.jsx(Fe,{courses:c,selectedIds:n,onCourseSelect:i});case"top_categories":case"category_courses":return e.jsx(Ke,{categories:u,selectedIds:n,onCourseSelect:i});case"top_instructors":return e.jsx(ze,{instructors:g,selectedIds:n,onCourseSelect:i});case"blogs":return e.jsx("h1",{children:"Blogs"});default:return null}};return e.jsx("div",{className:"rounded-md border",children:d()})},re=({field:t,onChange:s})=>{const{section:n}=D(),[a,o]=b.useState(t.value||"");b.useEffect(()=>{o(t.value||"")},[t.value,t.type]);const c=m=>{const{value:l,type:p}=m.target;if(p==="checkbox"){const i=m.target.checked;o(i),s(i);return}o(l),s(l)},u=m=>{var p;const l=((p=m.target.files)==null?void 0:p[0])||null;o(l),s(l)},g=()=>{var m;switch(t.type){case"contents":return e.jsx(Ve,{field:t,section_slug:n.slug,onChange:s});case"text":case"url":return e.jsx(S,{type:"text",id:t.name,name:t.name,value:a,onChange:c});case"textarea":return e.jsx(G,{id:t.name,name:t.name,rows:3,value:a,onChange:c});case"number":return e.jsx(S,{type:"number",id:t.name,name:t.name,value:a,onChange:c});case"image":case"file":return e.jsx(S,{type:"file",id:t.name,name:t.name,onChange:u});case"boolean":return e.jsx(S,{type:"checkbox",id:t.name,name:t.name,checked:a||!1,onChange:c,className:"h-4 w-4"});case"array":return e.jsx(De,{field:t,onChange:s});case"object":return e.jsx(te,{children:e.jsx(se,{className:"p-4",children:(m=t.fields)==null?void 0:m.map((l,p)=>e.jsxs("div",{className:"mb-4",children:[e.jsx(_,{htmlFor:`${t.name}-${l.name}`,className:"mb-2 block",children:l.label}),e.jsx("div",{className:"mt-1",children:e.jsx(re,{field:{...l,name:`${t.name}-${l.name}`,value:t.value&&t.value[l.name]!==void 0?t.value[l.name]:l.value},onChange:i=>{const d={...t.value||{},[l.name]:i};s(d)}})})]},p))})});default:return null}};return e.jsxs("div",{className:"mb-4",children:[t.type!=="boolean"&&t.type!=="contents"&&e.jsx(_,{htmlFor:t.name,className:"mb-2 block",children:t.label}),g(),t.type==="boolean"&&e.jsx(_,{htmlFor:t.name,className:"ml-2 inline-block",children:t.label})]})},Be=()=>{const{input:t,button:s,frontend:n}=q(),{section:a,setOpen:o,isSubmit:c,setIsSubmit:u}=D(),[g,m]=b.useState(!1),[l,p]=b.useState(!1),[i,d]=b.useState(a.thumbnail||null),[x,h]=b.useState(a.background_image||null),{data:r,setData:j,post:I,reset:N,processing:A,errors:y}=ge({title:a.title,sub_title:a.sub_title,description:a.description||"",thumbnail:null,video_url:a.video_url,background_image:null,background_color:a.background_color,properties:a.properties,active:a.active,sort:a.sort}),ne=F(r.properties),[Z,oe]=b.useState(ne);b.useEffect(()=>{oe(F(a.properties))},[a]);const le=f=>{if(f.preventDefault(),g){u(!0);return}ee()},ee=()=>{I(route("page.section.update",a.id),{onSuccess:()=>{N(),o(!1),u(!1)}})};b.useEffect(()=>{r.video_url&&l&&(ee(),N("video_url"),p(!1))},[r.video_url]);const ce=(f,L)=>{j(T=>({...T,properties:{...T.properties,[f]:L}}))};return b.useEffect(()=>{open||N()},[open]),e.jsxs("form",{onSubmit:le,children:[e.jsxs("div",{className:"space-y-6",children:[a.flags.title&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"title",children:t.title}),e.jsx(S,{type:"text",id:"title",name:"title",value:r.title,onChange:f=>k(f,j),placeholder:t.title_placeholder}),y.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.title})]}),a.flags.sub_title&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"sub_title",children:t.sub_title}),e.jsx(S,{type:"text",id:"sub_title",name:"sub_title",value:r.sub_title,onChange:f=>k(f,j),placeholder:t.title_placeholder}),y.sub_title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.sub_title})]}),a.flags.description&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:t.description}),e.jsx(G,{id:"description",name:"description",value:r.description||"",onChange:f=>k(f,j),placeholder:t.description_placeholder,rows:3}),y.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.description})]}),a.flags.thumbnail&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"thumbnail",children:t.thumbnail}),e.jsx(S,{type:"file",id:"thumbnail",name:"thumbnail",accept:"image/*",onChange:f=>k(f,j,d),className:"cursor-pointer"}),y.thumbnail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.thumbnail}),i&&e.jsx("img",{src:i,alt:"Thumbnail Preview",className:"h-32 w-auto rounded-lg border object-cover shadow-sm"})]}),a.flags.video_url&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"video_url",children:t.preview_video}),e.jsx(ve,{isSubmit:c,filetype:"video",delayUpload:!1,onFileSelected:f=>{m(!0)},onFileUploaded:f=>{p(!0),j("video_url",f.file_url)},onError:f=>{u(!1)},onCancelUpload:()=>{u(!1)}}),y.video_url&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.video_url})]}),a.flags.background_image&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"background_image",children:t.background_image}),e.jsx(S,{type:"file",id:"background_image",name:"background_image",onChange:f=>k(f,j,h)}),y.background_image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.background_image}),x&&e.jsx("img",{src:x,alt:"Background Image Preview",className:"h-32 w-auto rounded-lg border object-cover shadow-sm"})]}),a.flags.background_color&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"background_color",children:t.background_color}),e.jsx(S,{type:"color",id:"background_color",name:"background_color",value:r.background_color,onChange:f=>k(f,j)}),y.background_color&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.background_color})]}),Z.length>0&&e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-lg font-medium",children:n.section_properties}),e.jsx("div",{className:"mt-4 space-y-6",children:Z.map((f,L)=>e.jsx(re,{field:f,onChange:T=>ce(f.name,T)},`${f.name}-${L}`))})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(ye,{loading:A||c,disabled:A||c,children:s.save})})]})},He=({section:t,actionComponent:s})=>e.jsx(Me,{section:t,children:e.jsx(qe,{actionComponent:s})}),qe=({actionComponent:t})=>{const{button:s,frontend:n}=q(),{open:a,setOpen:o,isSubmit:c,section:u}=D();return e.jsxs(he,{open:a,onOpenChange:g=>!c&&o(g),children:[e.jsx(xe,{asChild:!0,children:t}),e.jsxs(je,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsx(be,{children:e.jsxs(fe,{className:"text-lg font-medium",children:[s.update," ",u.name," ",n.section]})}),e.jsx(Be,{})]})]})},Ge=({containerClass:t,contentClass:s,children:n,pageSection:a,customize:o,containerStyle:c,contentStyle:u,...g})=>e.jsx("section",{className:P("container",t),...g,style:c,children:e.jsxs("div",{className:P("mx-auto",s,o&&"section-edit"),style:u,children:[o&&a&&e.jsx(He,{section:a,actionComponent:e.jsx(v,{size:"icon",variant:"secondary",className:"absolute top-3 right-3 z-20",children:e.jsx(pe,{className:"h-7 w-7"})})}),n]})}),jt=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"}));export{Ge as S,xt as a,ht as g,jt as s};
