import{r as f,u as k,j as e,L as v,aV as m,c7 as p}from"./vendor-CSmzIpnM.js";import{B as d}from"./button-CPCtH35G.js";import E from"./live-class-form-ZZdeZSGA.js";import"./index-BSu11NtU.js";import"./utils-fgVZ67ei.js";import"./datetime-picker-DtFyQxDF.js";import"./popover-CSOpa4EW.js";import"./select-OeQ7gBvr.js";import"./use-lang-D5QbSlJz.js";import"./input-error-DFZPMsrM.js";import"./dialog-BWowll2R.js";import"./input-CXffHHHp.js";import"./label-aM7LSFRq.js";import"./scroll-area-IRPV99xu.js";import"./richtor-C9479olP.js";const J=({courseId:x,liveClass:t,zoomConfig:l})=>{var u;const[g,h]=f.useState(new Date),{props:w}=k(),{translate:j}=w,{button:a,dashboard:D}=j,n=(s=>{var c;const o=g,r=new Date(s.class_date_and_time),i=(c=s.additional_info)!=null&&c.end_time?new Date(s.additional_info.end_time):new Date(r.getTime()+3600*1e3);return o>i?"ended":o>=r&&o<=i?"live":r>o?"upcoming":"scheduled"})(t);f.useEffect(()=>{const s=()=>{var _;const i=new Date;h(i);const c=(_=t.additional_info)!=null&&_.end_time?new Date(t.additional_info.end_time):new Date(new Date(t.class_date_and_time).getTime()+3600*1e3);return i>c};if(s())return;const r=setInterval(()=>{s()&&clearInterval(r)},6e4);return()=>{clearInterval(r)}},[t.class_date_and_time,(u=t.additional_info)==null?void 0:u.end_time]);const b=!!(l.zoom_web_sdk&&l.zoom_sdk_client_id&&l.zoom_sdk_client_secret),N=s=>{switch(s){case"live":return"text-green-600 bg-green-100";case"upcoming":return"text-blue-600 bg-blue-100";case"ended":return"text-muted-foreground bg-gray-100";default:return"text-orange-600 bg-orange-100"}};return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`rounded-full px-2 py-1 text-center text-xs font-medium capitalize ${N(n)}`,children:n}),n==="live"?b?e.jsx(v,{href:route("live-class.start",t.id),children:e.jsxs(d,{size:"sm",variant:n==="live"?"default":"outline",className:"flex w-full items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),a.join_class]})}):e.jsx("a",{href:t.additional_info.join_url,target:"_blank",children:e.jsxs(d,{size:"sm",variant:n==="live"?"default":"outline",className:"flex w-full items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),a.join_class]})}):e.jsxs(d,{disabled:!0,variant:"outline",size:"sm",className:"flex w-full items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),a.join_class]}),n==="upcoming"?e.jsx(E,{courseId:x,liveClass:t,title:a.edit_live_class,handler:e.jsxs(d,{size:"sm",variant:"secondary",className:"bg-background border-secondary-foreground/20 flex w-full items-center gap-2 border",children:[e.jsx(p,{className:"h-4 w-4"}),a.edit_live_class]})}):e.jsxs(d,{size:"sm",disabled:!0,variant:"secondary",className:"bg-background border-secondary-foreground/20 flex w-full items-center gap-2 border",children:[e.jsx(p,{className:"h-4 w-4"}),a.edit_live_class]})]})};export{J as default};
